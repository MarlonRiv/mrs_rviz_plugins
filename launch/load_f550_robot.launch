<launch>

  <arg name="uav_name" default="$(optenv UAV_NAME uav)"/>
  <arg name="base_link" default="fcu_$(arg uav_name)"/>

  <group ns="$(arg uav_name)">
    <!-- <param name="robot_model" command="cat $(find mrs_rviz_plugins)/data/f550.xml" /> -->
    <param name="robot_model" command="$(find mrs_rviz_plugins)/scripts/generate_f550_xml.py $(find mrs_rviz_plugins)/data/f550.xml $(arg base_link) $(find mrs_rviz_plugins)" />
    <node name="tf_published_uav_marker_link" pkg="tf2_ros" type="static_transform_publisher" args="0 0 0 0 0 0 $(arg base_link) $(arg base_link)/uav_marker" />
    <node name="tf_published_props_link" pkg="tf2_ros" type="static_transform_publisher" args="0 0 0 0 0 0 $(arg base_link) $(arg base_link)/props" />
    <node name="tf_published_arms_link" pkg="tf2_ros" type="static_transform_publisher" args="0 0 0 0 0 0 $(arg base_link) $(arg base_link)/arms" />
    <node name="tf_published_arms_red_link" pkg="tf2_ros" type="static_transform_publisher" args="0 0 0 0 0 0 $(arg base_link) $(arg base_link)/arms_red" />
  </group>

</launch>

